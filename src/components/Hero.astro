---
import { company } from '../data/company';
import ArchipelagoSVG from './hero/ArchipelagoSVG.astro';
---

<section class="relative min-h-[100vh] overflow-hidden bg-[#0a1628]">
  <!-- === BACKGROUND LAYERS === -->

  <!-- Base gradient mesh -->
  <div class="absolute inset-0">
    <div class="absolute inset-0 bg-gradient-to-br from-[#0a1628] via-[#112240] to-[#0a1628]"></div>
    <!-- Animated gradient orbs -->
    <div class="absolute top-0 right-0 w-[800px] h-[800px] -translate-y-1/3 translate-x-1/4">
      <div class="absolute inset-0 bg-gradient-to-br from-primary/30 via-accent/20 to-transparent rounded-full blur-[100px] animate-pulse-slow"></div>
    </div>
    <div class="absolute bottom-0 left-0 w-[600px] h-[600px] translate-y-1/3 -translate-x-1/4">
      <div class="absolute inset-0 bg-gradient-to-tr from-primary/20 via-accent/10 to-transparent rounded-full blur-[80px] animate-pulse-slow" style="animation-delay: 1s"></div>
    </div>
  </div>

  <!-- Geometric grid overlay -->
  <div class="absolute inset-0 opacity-[0.03]" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 60px 60px;"></div>

  <!-- Diagonal accent line -->
  <div class="absolute top-0 right-0 w-[2px] h-[40vh] bg-gradient-to-b from-accent via-accent/50 to-transparent origin-top" style="transform: rotate(-15deg) translateX(200px);"></div>

  <!-- === MAIN CONTENT === -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 lg:pt-32">

    <!-- Top bar: Badge -->
    <div class="flex items-center justify-start mb-12 lg:mb-16" data-animate>
      <span class="inline-flex items-center gap-2 px-4 py-2 bg-white/5 backdrop-blur-sm border border-white/10 rounded-full text-sm text-white/80">
        <span class="w-2 h-2 bg-accent rounded-full animate-pulse"></span>
        Desde {company.foundedYear} en Canarias
      </span>
    </div>

    <!-- === HERO GRID === -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 items-center">

      <!-- LEFT: Content -->
      <div class="lg:col-span-6 xl:col-span-5 order-2 lg:order-1">

        <!-- YEARS: The hero number -->
        <div class="relative mb-6" data-animate style="animation-delay: 100ms">
          <div class="flex items-baseline gap-3">
            <span class="hero-years font-display text-[120px] sm:text-[150px] lg:text-[180px] font-black leading-none text-transparent bg-clip-text bg-gradient-to-br from-white via-white/90 to-white/40" data-count="33">
              0
            </span>
            <div class="flex flex-col">
              <span class="text-accent font-bold text-xl sm:text-2xl">años</span>
              <span class="text-white/50 text-sm sm:text-base">de experiencia</span>
            </div>
          </div>
          <!-- Decorative underline -->
          <div class="absolute -bottom-2 left-0 w-32 h-1 bg-gradient-to-r from-accent to-transparent rounded-full"></div>
        </div>

        <!-- Headline -->
        <h1 class="font-display text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6 leading-[1.15]" data-animate style="animation-delay: 200ms">
          Software Especializado
          <span class="block text-transparent bg-clip-text bg-gradient-to-r from-accent via-sky-400 to-accent bg-[length:200%_auto] animate-gradient">
            para su Empresa
          </span>
        </h1>

        <!-- Subtitle -->
        <p class="text-lg sm:text-xl text-white/70 mb-8 leading-relaxed max-w-lg" data-animate style="animation-delay: 300ms">
          Soluciones que entienden su sector y crecen con su negocio. El mismo equipo que desarrolla le da soporte.
        </p>

        <!-- CTAs -->
        <div class="flex flex-col sm:flex-row gap-4 mb-10" data-animate style="animation-delay: 400ms">
          <a
            href="#contacto"
            class="group relative px-8 py-4 bg-accent text-white font-bold rounded-xl overflow-hidden transition-all duration-300 hover:shadow-[0_0_40px_rgba(0,180,216,0.4)] flex items-center justify-center gap-2"
          >
            <span class="relative z-10">Solicitar demostración</span>
            <svg class="relative z-10 w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
            <div class="absolute inset-0 bg-gradient-to-r from-accent to-sky-500 opacity-0 group-hover:opacity-100 transition-opacity"></div>
          </a>
          <a
            href="tel:922217111"
            class="group px-8 py-4 border border-white/20 text-white font-semibold rounded-xl hover:bg-white/5 hover:border-white/40 transition-all duration-300 flex items-center justify-center gap-2"
          >
            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            922 217 111
          </a>
        </div>

        <!-- Trust indicators -->
        <div class="flex flex-wrap gap-6 text-sm" data-animate style="animation-delay: 500ms">
          <div class="flex items-center gap-2 text-white/60">
            <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
              <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
            </svg>
            <span>Formación incluida</span>
          </div>
          <div class="flex items-center gap-2 text-white/60">
            <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
            </svg>
            <span>Soporte 24/7</span>
          </div>
          <div class="flex items-center gap-2 text-white/60">
            <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
            </svg>
            <span>Empresa local</span>
          </div>
        </div>
      </div>

      <!-- RIGHT: Abstract Software Illustration -->
      <div class="lg:col-span-6 xl:col-span-7 order-1 lg:order-2 relative" data-animate style="animation-delay: 200ms">
        <!-- Glow behind illustration -->
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%]">
          <div class="absolute inset-0 bg-gradient-to-br from-primary/30 via-accent/15 to-transparent rounded-full blur-[80px]"></div>
        </div>

        <!-- Archipiélago Digital: Constelación de las 8 Islas Canarias -->
        <ArchipelagoSVG class="relative w-full min-h-[350px] lg:min-h-[450px]" />

      </div>
    </div>

    <!-- Spacer for wave -->
    <div class="pb-16 lg:pb-24"></div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-20 lg:bottom-24 left-1/2 -translate-x-1/2 flex flex-col items-center gap-1">
      <span class="text-white/80 text-xs tracking-widest uppercase hidden sm:block">Scroll</span>
      <a href="#productos" class="scroll-indicator group">
        <div class="w-8 h-12 rounded-full border-2 border-white/40 flex items-start justify-center pt-2 group-hover:border-accent transition-colors">
          <div class="w-1.5 h-3 bg-white/80 rounded-full scroll-dot group-hover:bg-accent transition-colors"></div>
        </div>
      </a>
    </div>
  </div>

  <!-- === WAVE TRANSITION === -->
  <div class="absolute bottom-0 left-0 right-0">
    <svg class="w-full h-20 lg:h-32" viewBox="0 0 1440 128" preserveAspectRatio="none" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 128V64C360 96 720 32 1080 64C1260 80 1380 72 1440 64V128H0Z" fill="#F9FAFB"/>
    </svg>
  </div>
</section>

<style>
  @keyframes pulse-slow {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.05); }
  }

  .animate-pulse-slow {
    animation: pulse-slow 8s ease-in-out infinite;
  }

  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .animate-gradient {
    animation: gradient 4s ease infinite;
  }

  [data-animate] {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  [data-animate].animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Hero years counter animation */
  .hero-years {
    transition: all 0.1s ease-out;
  }

  /* Scroll indicator - mouse style */
  .scroll-dot {
    animation: scroll-dot 2s ease-in-out infinite;
  }

  @keyframes scroll-dot {
    0%, 100% { transform: translateY(0); opacity: 1; }
    50% { transform: translateY(12px); opacity: 0.3; }
  }
</style>

<script>
  import { initScrollAnimations, animateCounters } from '../scripts';

  // Initialize on load and Astro page transitions
  const init = () => {
    initScrollAnimations();
    animateCounters();
  };

  document.addEventListener('DOMContentLoaded', init);
  document.addEventListener('astro:page-load', init);
</script>
